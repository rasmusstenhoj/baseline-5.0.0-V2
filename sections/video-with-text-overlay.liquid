{%- liquid
  assign title = section.settings.title
  assign video = section.settings.video
  assign video_size_mobile = section.settings.video_size_mobile
  assign video_size_desktop = section.settings.video_size_desktop
  assign video_ratio = video.aspect_ratio | default: '16/9'

  capture size_classes
    render 'banner-media-classes', image_size: video_size_mobile, image_size_desktop: video_size_desktop
  endcapture

  assign container_classes = 'absolute inset-0'
-%}

{% render 'video-with-text-overlay',
  video: video,
  size_classes: size_classes,
  container_classes: container_classes,
  content_position: section.settings.content_position,
  heading_size_class: section.settings.heading_size,
  title: title,
  subheading: section.settings.subheading,
  text: section.settings.text,
  text_align: section.settings.text_alignment,
  content_width_desktop: section.settings.content_width_desktop,
  text_color: section.settings.color_scheme,
  cta_link: section.settings.cta_link,
  cta_text: section.settings.cta_text,
  cta_style: section.settings.cta_style,
  cta_button_style: section.settings.cta_button_style,
  has_countdown_timer: false,
  aspect_ratio: video_ratio,
  aspect_ratio_desktop: video_ratio
%}

{% schema %}
{
  "name": "Video with text overlay",
  "disabled_on": {
    "groups": [
      "header",
      "footer",
      "aside"
    ]
  },
  "settings": [
    {
      "type": "header",
      "content": "Video"
    },
    {
      "id": "video",
      "type": "video",
      "label": "Video"
    },
    {
      "type": "select",
      "id": "video_size_desktop",
      "label": "Desktop height",
      "options": [
        {
          "value": "natural",
          "label": "Natural",
          "group": "No cropping"
        },
        {
          "value": "full_screen",
          "label": "Full screen",
          "group": "Screen height"
        },
        {
          "value": "three_quarters_screen",
          "label": "3/4 screen",
          "group": "Screen height"
        },
        {
          "value": "two_thirds_screen",
          "label": "2/3 screen",
          "group": "Screen height"
        },
        {
          "value": "half_screen",
          "label": "1/2 screen",
          "group": "Screen height"
        },
        {
          "value": "600px",
          "label": "600px",
          "group": "Fixed height"
        },
        {
          "value": "700px",
          "label": "700px",
          "group": "Fixed height"
        },
        {
          "value": "800px",
          "label": "800px",
          "group": "Fixed height"
        },
        {
          "value": "standard",
          "label": "Standard (4:3)",
          "group": "Aspect ratios"
        },
        {
          "value": "widescreen",
          "label": "Widescreen (16:9)",
          "group": "Aspect ratios"
        },
        {
          "value": "cinema",
          "label": "Cinema (1.85:1)",
          "group": "Aspect ratios"
        },
        {
          "value": "ultrawide",
          "label": "Ultrawide (2.35:1)",
          "group": "Aspect ratios"
        }
      ],
      "default": "full_screen"
    },
    {
      "type": "select",
      "id": "video_size_mobile",
      "label": "Mobile height",
      "options": [
        {
          "value": "natural",
          "label": "Natural",
          "group": "No cropping"
        },
        {
          "value": "full_screen",
          "label": "Full screen",
          "group": "Screen height"
        },
        {
          "value": "three_quarters_screen",
          "label": "3/4 screen",
          "group": "Screen height"
        },
        {
          "value": "two_thirds_screen",
          "label": "2/3 screen",
          "group": "Screen height"
        },
        {
          "value": "half_screen",
          "label": "1/2 screen",
          "group": "Screen height"
        },
        {
          "value": "600px",
          "label": "600px",
          "group": "Fixed height"
        },
        {
          "value": "700px",
          "label": "700px",
          "group": "Fixed height"
        },
        {
          "value": "800px",
          "label": "800px",
          "group": "Fixed height"
        },
        {
          "value": "full_portrait",
          "label": "Full portrait (9:16)",
          "group": "Aspect ratios"
        },
        {
          "value": "portrait",
          "label": "Portrait (4:5)",
          "group": "Aspect ratios"
        },
        {
          "value": "square",
          "label": "Square (1:1)",
          "group": "Aspect ratios"
        },
        {
          "value": "standard",
          "label": "Standard (4:3)",
          "group": "Aspect ratios"
        },
        {
          "value": "widescreen",
          "label": "Widescreen (16:9)",
          "group": "Aspect ratios"
        },
        {
          "value": "cinema",
          "label": "Cinema (1.85:1)",
          "group": "Aspect ratios"
        },
        {
          "value": "ultrawide",
          "label": "Ultrawide (2.35:1)",
          "group": "Aspect ratios"
        }
      ],
      "default": "full_screen"
    },
    {
      "type": "header",
      "content": "Content"
    },
    {
      "visible_if": "{{ section.settings.title != blank }}",
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Video with text overlay"
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Text",
      "default": "<p>Use this text to share information about your brand with your customers. Describe a product, share announcements, or welcome customers to your store.</p>"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        {
          "value": "text-heading-standard",
          "label": "Standard"
        },
        {
          "value": "text-heading-feature",
          "label": "Feature"
        },
        {
          "value": "text-heading-secondary",
          "label": "Secondary"
        }
      ],
      "default": "text-heading-feature"
    },
    {
      "type": "select",
      "id": "content_position",
      "label": "Position",
      "options": [
        {
          "value": "justify-start items-start text-left",
          "label": "Top left"
        },
        {
          "value": "justify-center items-start text-center",
          "label": "Top center"
        },
        {
          "value": "justify-end items-start text-right",
          "label": "Top right"
        },
        {
          "value": "justify-start items-center text-left",
          "label": "Left"
        },
        {
          "value": "justify-center items-center text-center",
          "label": "Center"
        },
        {
          "value": "justify-end items-center text-right",
          "label": "Right"
        },
        {
          "value": "justify-start items-end text-left",
          "label": "Bottom left"
        },
        {
          "value": "justify-center items-end text-center",
          "label": "Bottom center"
        },
        {
          "value": "justify-end items-end text-right",
          "label": "Bottom right"
        }
      ],
      "default": "justify-center items-center text-center"
    },
    {
      "type": "select",
      "id": "content_width_desktop",
      "label": "Width on desktop",
      "default": "lg:w-2/3",
      "options": [
        {
          "value": "lg:w-1/3",
          "label": "One third"
        },
        {
          "value": "lg:w-1/2",
          "label": "One half"
        },
        {
          "value": "lg:w-2/3",
          "label": "Two thirds"
        },
        {
          "value": "lg:w-full",
          "label": "Full width"
        }
      ]
    },
    {
      "type": "header",
      "content": "Color"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "default": "scheme1",
      "label": "Color scheme"
    },
    {
      "type": "header",
      "content": "Call to action"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Link"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Text"
    },
    {
      "type": "select",
      "id": "cta_style",
      "label": "Style",
      "options": [
        {
          "value": "link",
          "label": "Link"
        },
        {
          "value": "button",
          "label": "Button"
        }
      ],
      "default": "link"
    },
    {
      "visible_if": "{{ section.settings.cta_style == 'button' }}",
      "type": "select",
      "id": "cta_button_style",
      "label": "Button style",
      "default": "secondary",
      "options": [
        {
          "value": "primary",
          "label": "Primary"
        },
        {
          "value": "secondary",
          "label": "Secondary"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Video with text overlay",
      "category": "Banners"
    }
  ]
}
{% endschema %}
